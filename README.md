Smart FAQ Service (RAG)

Мини-сервис "Умный FAQ" для автоматических ответов на вопросы пользователей на основе базы знаний (PDF-документов).

Реализован паттерн RAG: поиск релевантного контекста в векторной базе и генерация ответа через LLM.

- Технический стек

- Язык: Python 3.10
- API: FastAPI
- База данных: PostgreSQL (хранение истории запросов)
- Кэш: Redis (кэширование ответов на 1 час)
- Векторная БД: Qdrant (хранение векторов документов)
- LLM: Google Gemini 1.5 Flash (через LangChain)
- Embeddings: `sentence-transformers/all-MiniLM-L6-v2` (Локальная модель, работает на CPU)
- Инфраструктура: Docker & Docker Compose

 --БЫСТРЫЙ СТАРТ!--

 1. Клонирование и настройка

Создайте файл `.env` на основе примера:

Откройте файл .env и вставьте ваш API ключ от Google Gemini: GOOGLE_API_KEY=your_api_key_here

2. Запуск

Весь проект запускается одной командой: docker-compose up --build

После запуска сервис доступен по адресу: http://localhost:8000

 --ФУНКЦИОНАЛ!--

 API Эндпоинты (Swagger: /docs)
POST /api/documents — Загрузка базы знаний.

Сканирует папку documents/.

Разбивает PDF на чанки.

Генерирует векторы (используется локальная модель HuggingFace, бесплатно и приватно).

Сохраняет векторы в Qdrant.

POST /api/ask — Основной метод.

Проверяет Redis: если вопрос уже был, отдает ответ мгновенно.

Если в кэше нет: ищет похожие документы в Qdrant.

Формирует промпт и отправляет в Gemini.

Сохраняет вопрос, ответ и затраченные токены в PostgreSQL.

GET / — Веб-интерфейс (чат)

 --ТЕСТИРОВАНИЕ!--

 Проект покрыт unit и интеграционными тестами (pytest). Чтобы запустить тесты внутри контейнера: docker-compose exec backend pytest

 --АРХИТЕКТУРНЫЕ РЕШЕНИЯ!--

Гибридный AI: Используются Local Embeddings (на CPU) для векторизации, чтобы избежать лимитов API (Rate Limits) и ускорить индексацию. Внешняя LLM (Gemini) используется только для финальной генерации ответа.

Отказоустойчивость: Если LLM недоступна, сервис корректно обрабатывает ошибки.

Кэширование: Частые вопросы не нагружают LLM благодаря Redis.

--СТРУКТУРА ПРОЕКТА!--

smart-faq/
├── app/
│   ├── main.py          # Точка входа FastAPI
│   ├── rag.py           # Логика работы с AI и векторами
│   ├── database.py      # Подключение к Postgres
│   ├── models.py        # SQLAlchemy модели
│   ├── static/          # Frontend (HTML/CSS/JS)
├── documents/           # Папка для загрузки PDF
├── tests/               # Pytest тесты
├── docker-compose.yml   # Оркестрация сервисов
└── requirements.txt     # Зависимости